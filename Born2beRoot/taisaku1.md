問1
仮想マシンVM(Virtual Machine)とは？
どう動いていて、なんのために使うのか？

参考記事
https://www.kagoya.jp/howto/it-glossary/server/virtualbox/
https://qiita.com/9en/items/f4eab2f61485a9f3885a
https://hnavi.co.jp/knowledge/blog/virtual-machine/

仮想マシンとは、仮想化技術を利用して、コンピューター内にもう一つのコンピューターを再現する技術のこと。
仮想化とは、物理的な環境に依存せず、物理マシン（ハードウェア）に含まれるCPU、メモリ、ストレージなどのリソースを論理的に分割する技術です。

仮想マシンには、「ホスト型」、「ハイパーバイザー型」、「コンテナ型」の三種類のアーキテクチャ（ソフトウェアまたはハードウェアの基本的な設計概念）があります。

ホスト型とは、ホストOSに「ホスト型専用の仮想化ソフトウェア」をインストールしています。
ホストOSもゲストOSも必要です。

ハイパーバイザー型は、
ハードウェアに「ハイパーバイザー」と呼ばれる「ハイパーバイザー型専用の仮想化ソフトウェア」を直接インストールしています。
ホストOSが不要です。

コンテナ型
ホストOSに「コンテナエンジン」と呼ばれる「コンテナ型専用の仮想化ソフトウェア」をインストールしています。
ゲストOSが不要です。

今回の場合はiMACという物理マシンで、ホストOSはubuntuでその中に仮想環境を作成し、そのゲストOSはdebianということです。

なぜ使うのか？

仮想マシンを使うことで、物理的なパソコンやサーバーといったハードウェアが不要となるから。また1台のコンピューターで複数のサービスを動かすことは可能だが、万が一セキュリティを突破されてしまった場合、全てが乗っ取られてしまう可能性がある。そこで仮想マシンで分割して作業を行えば軽減させることができる。
それぞれの仮想マシンに異なるゲストOSをインストールできるのも利点で、複数OSを同時に起動できる。
スナップショットで仮想マシンの特定時点のディスク状態を保存することも可能。

特徴：
隔離（Isolation）：VMごとに別世界。片方が壊れても他は無事。
同時に複数OS：Mac 上に Linux、Windows などを並べて動かせる。
壊してOKな実験環境：スナップショットや VDI の複製で、すぐに復元できる。


問2
なぜdebianを選んだのか。Rockyとの違いは何か？

まずこの二つはそれぞれ二つの流派に分けることができます。
Debian系（Debian/Ubuntu系） vs Red Hat系（RHEL）
という「流派（ファミリー）の違い」によく言い換えられます。

OS:PCを動かす「土台のソフト」。Windows/macOS/Linuxなど
Linux:厳密には「Linuxカーネル」というOSの中心部品のこと。
カーネル:CPU・メモリ・ディスク・ネットワークなどのハードを直接扱う中枢
ディストリビューション:LinuxカーネルだけではPCとして扱い
にくいので、
便利な基本ソフト（コマンド群）
設定の初期値
インストーラ
アップデートの仕組み
…を セットにした完成品が「Linuxディストリビューション」です。
DebianもRocky Linuxもこの「完成品（distro）」の名前です。

違いの中心は
①アプリの入れ方（apt vs dnf）
②初期設定や文化（SELinux/firewalld寄り、など）
③情報の多さと学びやすさ

「Linuxの本質（権限、プロセス、ファイル、ネットワーク）」は どっちでも同じように学べる

Debian系 vs Red Hat系（RHEL系）って何が違うの？

一言でいうと、

Debian系：Debianを祖先にした流派（Debian/Ubuntuなど）

RHEL系：Red Hat Enterprise Linux（RHEL）を祖先にした流派（Rocky/Almaなど）

Debian系（Debian/Ubuntuなど）

代表：Debian, Ubuntu, Linux Mint など

パッケージ：.deb

道具：apt（裏側は dpkg）

特徴：情報が多く、個人〜サーバまで幅広い。Debianは特に「安定重視」で有名。

RHEL系（Rockyなど）

代表：RHEL, Rocky Linux, AlmaLinux, Fedora（※Fedoraは親戚で立ち位置が違う）

パッケージ：.rpm

道具：dnf（昔は yum）

特徴：企業サーバでの運用文化が強い。Rockyは「RHEL互換」を狙ったディストロ。


問3
apt と aptitude の違いは？

aptとはそもそもDebian系のパッケージ管理ツール群で、
apt installでパッケージを入れたり、apt updateで
リポジトリ情報を更新したりする。

aptitudeは、このaptをベースにした高レベルな
フロントエンド（guiがあるということ）である。
ただし、今はaptコマンドだけで十分なケースが多いので、
42のプロジェクトでもaptを使用しています。

問4
AppArmorとは何か？

Linuxにはアクセス制御のシステムには「所有者・グループ・その他＋rwx」などのパーミッション設定があるが、これら結局のところ上位の権限を持つ者または管理者であれば「なんでもできる」ようになっている。これを任意アクセス制御（DAC）と言う。
それに加えて、強制アクセス制御（MAC）と呼ばれる仕組みがある。そのうちDebian系のMACをAppArmorという。
AppArmorとは「管理者ですら強制的にアクセス制御の影響を受ける」仕組みである。
例えばあるファイルが所有者だけが読み込みできる設定になっているとしても、DACの場合はsudoで任意のコマンドを実行できる場合は読めてしまう。AppArmorはそのようなことができない。これが一番の違いである。

問5
強力なパスワードポリシーのメリット／デメリットと、この課題での実装

✅ メリット

総当たり・辞書攻撃に対して圧倒的に強くなる。

ユーザー名や簡単な単語が使えないので推測されにくい。

有効期限を設けることで、漏洩しても長く悪用されにくい。
yannick.eu
+1

❌ デメリット

ユーザー視点では覚えづらく、紙にメモしたり再利用したりしがちで、
運用次第で逆にセキュリティを落とすこともある。

頻繁な期限切れで、業務やログインのストレスが増える。


このプロジェクトで実装している内容

パスワード有効期限：30日

最低日数（パスワード変更の間隔）：2日

期限切れ警告：7日前

長さ：10文字以上

少なくとも 大文字・小文字・数字 を含む

同じ文字の連続は3文字まで

ユーザー名を含んではいけない

直前のパスワードと比較して、少なくとも7文字は違う（root 以外）

実装としては
/etc/login.defs で PASS_MAX_DAYS / PASS_MIN_DAYS / PASS_WARN_AGE を設定。
Medium

libpam-pwquality を入れて、/etc/pam.d/common-password の pam_pwquality.so に
minlen=10 ucredit=-1 lcredit=-1 dcredit=-1 maxrepeat=3 usercheck=1 difok=7 enforce_for_root などを指定。


問6
パーティションとは？LVM とは？

パーティションのイメージ

1個の物理ディスクを「論理的な区切り」に分割したものがパーティション。
例えば：
/boot 用の小さいパーティション（非 LVM）
残りを LVM 用パーティション … という構成が Born2BeRoot の典型。

PV（Physical Volume）：物理 HDD/SSD やそのパーティション
VG（Volume Group）：複数 PV を束ねた“プール”
LV（Logical Volume）：VG から切り出した“柔らかいパーティション”（柔らかいとは、柔軟なパーティションということ）

メリット：
LV のサイズをオンラインで拡張・縮小しやすい。
複数ディスクをまたいだボリュームを作れる。
スナップショットを作ってバックアップが取りやすい。

口頭回答テンプレ

「パーティションは、1つの物理ディスクを論理的に区切ったものです。
Born2beRoot では /boot を通常パーティションにして、それ以外を LVM 用のパーティションにしています。
LVM では、物理パーティションを PV にして、それらをまとめて VG を作り、
そこから LV という“柔軟なパーティション”を切り出します。
これによって後から容量を増やしたり、スナップショットを取ってバックアップしやすくなります。」


問7
sudoとは？

理屈

「一時的に権限を借りる」コマンド。

su は完全に root に“なりっぱなし”だが、sudo はコマンド1発分だけ権限を借りる。

sudo の強み：

どのユーザーにどのコマンドを許可するか細かく制御できる。

ログ（/var/log/sudo/）に、誰がいつ何を実行したか残せるように設定できる。

Born2BeRoot では、
試行回数3回まで
間違えたときのカスタムメッセージ
/var/log/sudo/ に履歴を保存
TTY 必須
secure_path の制限
…などを visudo（/etc/sudoers）または /etc/sudoers.d/ で設定しています。

口頭回答テンプレ

「sudo は一時的に管理者権限を借りてコマンドを実行する仕組みです。
誰がいつどのコマンドを実行したかをログに残せるので、監査性も高くなります。
このプロジェクトでは試行回数を3回までに制限し、
/var/log/sudo/ にログを残し、TTY や PATH 制限も有効にすることで
最小限必要な範囲で権限を渡すようにしています。」


問8
UFWとは？

✅ 理屈
Uncomplicated Firewall の略で、iptables/nftables のフロントエンド。

「デフォルトで全部閉じておき、必要なポートだけ開ける」という考え方。

Born2BeRoot では：

SSH用のポート4242番だけ開ける。

VM起動時に UFW が有効になっていること。

🗣 口頭回答テンプレ

「UFW は Linux のファイアウォールを簡単に扱うためのツールで、
基本的にはすべての外部からの接続を拒否して、必要なポートだけ許可するために使います。
このプロジェクトでは SSH 用の 4242 番ポートだけを許可し、それ以外は閉じることで
攻撃される窓口を最小限にしています。」



問9
SSH とは？何の価値がある？
✅ 理屈

Secure Shell：暗号化されたリモートログインプロトコル。

パスワードやコマンド内容を暗号化して送るので、LAN/WAN上の盗聴に強い。

Born2BeRoot では：

ポートを22→4242 に変更（スキャナ対策＋subject要件）。

root ログインを禁止（PermitRootLogin no）。

通常ユーザーでログインし、必要な操作だけ sudo で行う。

🗣 口頭回答テンプレ

「SSH は暗号化されたプロトコルで、リモートのサーバに安全にログインするために使います。
Born2beRoot では、デフォルトの22番ポートではなく 4242 番を使い、root ログインも禁止して、
通常ユーザー＋sudo の組み合わせで安全に操作できるようにしています。」



問10
cron とは？
✅ 理屈

指定した時刻・間隔でコマンドを自動実行する仕組み。

crontab -e で「分 時 日 月 曜日 コマンド」という書式で設定。

このプロジェクトでは、monitoring.sh（システム情報を wall で表示）を
10分ごとに root の crontab から実行するのが要件。

🗣 口頭回答テンプレ

「cron は“定期実行の予約サービス”のようなもので、指定した間隔でコマンドを自動で実行してくれます。
今回はシステム情報を表示する monitoring.sh を root の crontab に登録して、
10分ごとに wall で全ユーザーに通知するようにしています。」












