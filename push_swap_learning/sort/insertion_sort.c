/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   insertion_sort.c                                   :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: shotarokuriyama <shotarokuriyama@studen    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2026/01/03 20:02:04 by skuriyam          #+#    #+#             */
/*   Updated: 2026/01/04 12:23:30 by shotarokuri      ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stdio.h>

//左側は常にソート済みとして、
//右から1個取り出して“正しい位置に差し込む”。

void insertion_sort(int *a, int n)
{
    int i;
    int j;
    int key;

    // a[0..0] は要素1つなので「ソート済み」とみなせる → i=1から挿入開始
    i = 1;
    while (i < n) // i=1..n-1 の n-1回
    {
        key = a[i];       // 挿入したい値を退避（これがあるから上書きしてもOK）
        j = i - 1;        // ソート済み部分の右端から左へ比較していく

        // keyより大きい要素を1つずつ右へシフトして、keyの入る穴を作る
        while (j >= 0 && a[j] > key)
        {
            a[j + 1] = a[j]; // 右へずらす（swapではない）
            j--;
        }

        // whileを抜けた位置の「右隣」が key の入るべき場所
        a[j + 1] = key;
        i++;
    }
}

/*
「スワップしなくて大丈夫？」の答え
結論：大丈夫です。スワップではなく“シフト”だからです。

3) 「消えてOK」が腑に落ちる具体例

例えば配列がこうだとします：

[ 2, 5, 7, 3, 9 ]
       ^
      i=3, key=3

左側 [2,5,7] はソート済みとして、3 を挿入したい。
・key = 3
・j = 2（値7）

シフトの動き
1, a[2]=7 > 3 なので
・a[3] = a[2] → a[3] が 7 で上書きされる

[ 2, 5, 7, 7, 9 ]   ← ここで「3の元の場所」は壊れてOK（keyは退避済み）


2, j=1（値5）
・a[2] = a[1]

[ 2, 5, 5, 7, 9 ]

3, j=0（値2）
・2 > 3 は false なので while終了

最後に
・a[j+1] = a[1] = key

[ 2, 3, 5, 7, 9 ]

ポイント：
・key は最初に退避してるから、途中で上書きされても困らない
・“消える”のではなく、“右に移動している”だけ
*/


int main(void)
{
	int a[] = {9, 2, 7, 5, 1, 3};
	int i;

	insertion_sort(a, 6);
	i = 0;
	while (i < 6)
	{
		printf ("%d, ", a[i]);
		i++;
	}
	printf("\n");
}