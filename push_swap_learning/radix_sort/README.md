##　基数ソートを理解するためには

1. カウントソート

2. 安定なカウントソート

3. 基数ソート

4. 基数ソート（2進数）



## カウントソート

前提
実装的には「各桁に対して安定なカウントソート」を繰り返す説明が王道

・「0〜9の出現回数を数えて並べ直す」＝カウントソート
・これを 1の位→10の位→100の位… と繰り返すのが（LSD方式の）基数ソート、
  という理解がよく使われます。


1. カウントソートは何をするソート？
前提：値の範囲が小さいときに強い

例えば、配列の中身が
・0〜9 の整数だけ
・0〜100 の点数だけ
・0〜999 のIDだけ
みたいに「取りうる値の範囲（K）が小さい」なら、
カウントソートはめちゃくちゃ速いです。

基本アイデア
・値を比較しない
・各値が何個あるか数える
・数えた情報から 正しい順番で並べ直す


2. いちばん簡単なカウントソート（“数えた回数だけ出力”）

まず最初は「安定性（stable）」は気にせず、超単純版。

例
配列：[4, 2, 2, 8, 3, 3, 1]
値は 0〜8 の範囲とする（最大が8）

手順
１、count配列を用意（サイズ = 最大値+1）
   count[0..8] = 0	
２、配列を見て数える
・4が出た → count[4]++
・2が出た → count[2]++
  …を全部やる

結果：
・count[1]=1
・count[2]=2
・count[3]=2
・count[4]=1
・count[8]=1
（他は0）

３、小さい値から順に、count回だけ出力
・1を1回
・2を2回
・3を2回
・4を1回
・8を1回
結果：[1, 2, 2, 3, 3, 4, 8]
 
これで「整数の並び」はソートできました。

3. でも radix sort に必要なのは「安定な」カウントソート
あなたが聞いた基数ソート（radix sort）は
・1の位で並べる
・10の位で並べる
・100の位で並べる…

みたいに「桁ごとに何度も並べ直す」ので、ここで重要なのが 安定性（stable）。

安定（stable）とは？
同じキー（同じ値・同じ桁）同士の元の順番を保つこと。

例（安定が必要な理由）
「10の位」で並べるとき、10の位が同じグループの中では
すでに確定している「1の位」の順番を壊したくない。

だから radix sort では 安定なカウントソートがほぼ必須です。


4. 安定なカウントソートの核心：累積和（prefix sum）

ここが最重要です。

count配列を “累積和” に変える
さっきの count（出現回数）をこう変換します：
count[d] = 「値が d 以下の要素が何個あるか」
つまり “境界” を表す配列になります。

例
元の count（回数）：
count[1]=1
count[2]=2
count[3]=2
count[4]=1
count[8]=1

累積和にすると：

count[0]=0
count[1]=1 （<=1 は1個）
count[2]=3 （<=2 は3個）
count[3]=5 （<=3 は5個）
count[4]=6 （<=4 は6個）
…
count[8]=7 （<=8 は7個）

ここで何がわかるかというと…

「値 d の最終位置」がわかる

配列 out を 0-indexed で作るとして
count[d] は「<=d が何個」
だから 値 d の最後の要素が入る位置は count[d]-1

例：
count[3]=5 → 3は out[4] が最後
count[2]=3 → 2は out[2] が最後


5. 安定にする最後の仕掛け：「後ろから」見て詰める

安定カウントソートの典型はこれです：
・元配列を 後ろから走査する
・値 d を見たら out[ count[d]-1 ] に置く
・置いたら count[d]--（次の空き位置を1つ前にずらす）

なぜ後ろから？
・同じ値 d が複数あるとき、
・後ろに出てきたものほど out の後ろ側に置かれる
・つまり 元の順序が保たれる（安定）

6. 超わかりやすい “安定カウントソート” の流れまとめ

配列 arr（長さ n）、値の範囲 0..K
１、count[0..K] = 0 を作る
２、arr を見て count[value]++（回数を数える）
３、count を累積和にする（count[i]+=count[i-1]）
４、out[0..n-1] を作る
５、arr を 後ろから走査
・v = arr[i]
・pos = count[v] - 1
・out[pos] = v
・count[v]--
６、out を arr にコピーして終了


7. ここだけは覚えておけばOK（理解の芯）
・count（回数） → 累積和にすると “位置情報” になる
・pos = count[v]-1 が「v を置くべき場所」
・後ろから入れると安定になる

これが理解できると、radix sort も一気に理解が楽になります。